import{a as K}from"./chunk-BTH7EP3S.js";import"./chunk-KCYCIDWO.js";import{A as B,C as G,E as H,J as z,K as J,c as O,f as j,n as q,p as k,r as A,s as D,t as W}from"./chunk-BKSPUT4V.js";import"./chunk-PIU5UDQ6.js";import"./chunk-D7YN4OJI.js";import"./chunk-5GUBFEH3.js";import"./chunk-4PGTP63H.js";import"./chunk-B3GVBKL3.js";import"./chunk-HC6MZPB3.js";import"./chunk-DYTQHTWS.js";import"./chunk-FERD25SW.js";import"./chunk-YYX6ZCUM.js";import"./chunk-EQKTRDAQ.js";import"./chunk-MM5QLNJM.js";import"./chunk-72KDLSWN.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import"./chunk-KRKXOG46.js";import"./chunk-MCRJI3T3.js";import"./chunk-5F3K422G.js";import"./chunk-Y2IKLLDI.js";import{$ as b,$a as L,D as u,G as m,H as n,I as o,J as f,O as p,Ua as x,Va as M,Wa as w,X as r,Xa as V,Y as E,Ya as P,_ as C,aa as _,ab as R,bb as N,db as F,ga as y,ia as S,pa as I,ra as T,w as l,x as d,z as v}from"./chunk-I3YUSPIV.js";import"./chunk-RZ5T5SE5.js";import"./chunk-O33TUF6J.js";import"./chunk-67S4WPSR.js";import"./chunk-F7XBNY6P.js";import"./chunk-5S5ELBDR.js";import"./chunk-LRNV46AZ.js";import"./chunk-6FMIVMID.js";import"./chunk-JJQUOQDV.js";import"./chunk-JWIEPCRG.js";import"./chunk-LF5XB4YN.js";import{i as h}from"./chunk-OYAVQN5W.js";function Q(s,a){s&1&&f(0,"ion-spinner",10)}function U(s,a){s&1&&f(0,"ion-spinner",10)}var re=(()=>{let a=class a{constructor(e,t,i,c){this.route=e,this.router=t,this.authService=i,this.toastController=c,this.email="",this.verificationCode="",this.isLoading=!1,this.isResending=!1}ngOnInit(){this.route.queryParams.subscribe(e=>{e&&e.email?this.email=e.email:this.router.navigate(["/register"])})}onSubmit(){if(!this.verificationCode||this.verificationCode.length!==6){this.showToast("Por favor, insira o c\xF3digo de 6 d\xEDgitos");return}this.isLoading=!0,this.authService.verifyEmail(this.email,this.verificationCode).subscribe(e=>{this.isLoading=!1,e.success?(this.showToast("Email verificado com sucesso!"),setTimeout(()=>{this.router.navigate(["/login"])},1500)):this.showToast("C\xF3digo inv\xE1lido ou expirado")},e=>{var t;this.isLoading=!1,console.error("Erro ao verificar email:",e),this.showToast("Erro ao verificar email: "+(((t=e.error)==null?void 0:t.message)||"Tente novamente"))})}resendCode(){this.isResending=!0,this.authService.requestEmailVerification(this.email).subscribe(e=>{this.isResending=!1,e.success?this.showToast("Novo c\xF3digo enviado para seu email"):this.showToast("Erro ao reenviar c\xF3digo: "+e.message)},e=>{var t;this.isResending=!1,console.error("Erro ao reenviar c\xF3digo:",e),this.showToast("Erro ao reenviar c\xF3digo: "+(((t=e.error)==null?void 0:t.message)||"Tente novamente"))})}showToast(e){return h(this,null,function*(){yield(yield this.toastController.create({message:e,duration:2e3,position:"bottom"})).present()})}};a.\u0275fac=function(t){return new(t||a)(d(I),d(T),d(K),d(z))},a.\u0275cmp=v({type:a,selectors:[["app-verify-email"]],decls:28,vars:6,consts:[["color","primary"],[1,"ion-padding"],[1,"container"],[3,"ngSubmit"],["position","floating"],["type","text","name","verificationCode","required","","maxlength","6","minlength","6",3,"ngModelChange","ngModel"],["expand","block","type","submit",3,"disabled"],["name","dots",4,"ngIf"],[1,"resend-container"],["fill","clear",3,"click","disabled"],["name","dots"]],template:function(t,i){t&1&&(n(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),r(3,"Verifica\xE7\xE3o de Email"),o()()(),n(4,"ion-content",1)(5,"div",2)(6,"h2"),r(7,"Verifique seu Email"),o(),n(8,"p"),r(9,"Enviamos um c\xF3digo de verifica\xE7\xE3o para "),n(10,"strong"),r(11),o()(),n(12,"p"),r(13,"Por favor, insira o c\xF3digo de 6 d\xEDgitos abaixo para verificar sua conta:"),o(),n(14,"form",3),p("ngSubmit",function(){return i.onSubmit()}),n(15,"ion-item")(16,"ion-label",4),r(17,"C\xF3digo de Verifica\xE7\xE3o"),o(),n(18,"ion-input",5),_("ngModelChange",function(g){return b(i.verificationCode,g)||(i.verificationCode=g),g}),o()(),n(19,"ion-button",6),r(20," Verificar "),u(21,Q,1,0,"ion-spinner",7),o()(),n(22,"div",8)(23,"p"),r(24,"N\xE3o recebeu o c\xF3digo?"),o(),n(25,"ion-button",9),p("click",function(){return i.resendCode()}),r(26," Reenviar C\xF3digo "),u(27,U,1,0,"ion-spinner",7),o()()()()),t&2&&(l(11),E(i.email),l(7),C("ngModel",i.verificationCode),l(),m("disabled",!i.verificationCode||i.verificationCode.length!==6||i.isLoading),l(2),m("ngIf",i.isLoading),l(4),m("disabled",i.isResending),l(2),m("ngIf",i.isResending))},dependencies:[J,j,q,k,A,D,W,B,G,H,O,F,P,x,M,L,R,N,V,w,S,y],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;padding:20px;text-align:center}h2[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--ion-color-primary)}form[_ngcontent-%COMP%]{width:100%;max-width:400px;margin:20px 0}ion-button[_ngcontent-%COMP%]{margin-top:20px}.resend-container[_ngcontent-%COMP%]{margin-top:30px}"]});let s=a;return s})();export{re as VerifyEmailPage};

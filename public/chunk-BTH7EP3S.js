import{a as i}from"./chunk-KCYCIDWO.js";import{a as s,d as c,f as a,i as l,la as u}from"./chunk-I3YUSPIV.js";var U=(()=>{let r=class r{constructor(t){this.http=t,this.currentUserSubject=new s(null),this.currentUser=this.currentUserSubject.asObservable();let e=localStorage.getItem("currentUser");e&&this.currentUserSubject.next(JSON.parse(e))}register(t){return console.log("Enviando dados de registro:",t),this.http.post(`${i.apiUrl}/auth/register`,t)}login(t,e){return console.log("Tentando login com:",t),this.http.post(`${i.apiUrl}/auth/login`,{email:t,password:e}).pipe(c(o=>{o&&o.access_token&&(localStorage.setItem("access_token",o.access_token),localStorage.setItem("currentUser",JSON.stringify(o.user)),this.currentUserSubject.next(o.user),console.log("Login bem-sucedido:",o))}))}logout(){localStorage.removeItem("access_token"),localStorage.removeItem("currentUser"),this.currentUserSubject.next(null)}getToken(){return localStorage.getItem("access_token")}isLoggedIn(){return!!this.getToken()}getCurrentUser(){return this.currentUserSubject.value}getProfile(){return this.http.get(`${i.apiUrl}/auth/profile`)}requestEmailVerification(t){return this.http.post(`${i.apiUrl}/auth/request-verification`,{email:t})}verifyEmail(t,e){return this.http.post(`${i.apiUrl}/auth/verify-email`,{email:t,token:e})}};r.\u0275fac=function(e){return new(e||r)(l(u))},r.\u0275prov=a({token:r,factory:r.\u0275fac,providedIn:"root"});let n=r;return n})();export{U as a};
